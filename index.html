<html>

<head>
    <title>DWT Test</title>
    <script src="Resources/dynamsoft.webtwain.initiate.js"> </script>
    <script src="Resources/dynamsoft.webtwain.config.js"> </script>
	<script src="Resources/addon/dynamsoft.webtwain.addon.pdf.js"></script>
</head>

<body>
	<div style="display:flex;flex-direction:column;justify-content:center;align-items:center;">
		<h1>DWT Test</h1>
        <div style="display:flex;width:100%;max-width:800px;">
    	    <div id="dwtcontrolContainer" ></div>
            <div style="flex-direction:row;border:1px solid;width:50%">
                <!-- Operations on images -->
                <div>
                    <input type="button" value="Scan" onclick="AcquireImage();" />
                    <input type="button" value="Upload local Image" onclick="LoadImages()" />
                    <input type="button" value="Rotate" onclick="RotateImage()" />
                </div>
                <!-- Used to output the desired information -->
                <div style="margin-top:10px;">
                    <input type="button" value="Get Info" onclick="" />
                    <div>
                        <label>Info :</label>
                        <div id="info" ></div>
                    </div>
                </div>
		    </div>
        </div>
		
	</div>
    <script type="text/javascript">
        var DWObject;

        function Dynamsoft_OnReady() {
            DWObject = Dynamsoft.DWT.GetWebTwain('dwtcontrolContainer');
        }

        function AcquireImage() {
            if(DWObject) {
                if (Dynamsoft.Lib.env.bMobile) {
                  DWObject.LoadImageEx('', 5,
                        function() {
                            console.log('success');
                        },
                        function(errCode, error) {
                            alert(error);
                        }
                    );                 
                } else {
                    DWObject.SelectSource(function() {
                            DWObject.OpenSource();
                            DWObject.AcquireImage();
                        },
                        function() {
                            console.log("SelectSource failed!");
                        }
                    );
                }
            }
        }

		function LoadImages() {
    		if(DWObject) {
				if(DWObject.Addon && DWObject.Addon.PDF) {
					DWObject.Addon.PDF.SetResolution(300);
					DWObject.Addon.PDF.SetConvertMode(Dynamsoft.DWT.EnumDWT_ConvertMode.CM_RENDERALL);
				}
				bUpload = false;
				DWObject.IfShowFileDialog = true;
				DWObject.LoadImageEx('', 5,
					function () {
					},
					function (errorCode, errorString) {
						alert('Load Image:' + errorString);
					}
        		);
    		}
		}

        function RotateImage() {
            console.log('Number in buffer:', DWObject.HowManyImagesInBuffer);
            if(DWObject.HowManyImagesInBuffer !== 0) {
                DWObject.RotateLeft(DWObject.CurrentImageIndexInBuffer);
            }
        }

    </script>
</body>

</html>